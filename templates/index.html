<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-hairstyle AI ì¶”ì²œ ì‹œìŠ¤í…œ</title>
    <style>
        /* * -------------------------
         * ê¸°ë³¸ & ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼
         * -------------------------
         */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Malgun Gothic', 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
            background-color: #f4f7f6;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }

        .container {
            width: 100%;
            max-width: 680px; /* â˜…â˜…â˜… ì „ì²´ì ì¸ ì¹´ë“œ í­ì„ ì¡°ê¸ˆ ë„“í˜”ìŠµë‹ˆë‹¤ (ì„ íƒ ì‚¬í•­) */
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            font-weight: 700;
        }

        h2 {
            font-size: 1.8em;
            color: #16a085;
            border-bottom: 3px solid #16a085;
            padding-bottom: 10px;
            margin-top: 40px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        h3 {
            font-size: 1.4em;
            color: #2980b9;
            margin-top: 0;
            margin-bottom: 15px;
            font-weight: 600;
        }

        /* * -------------------------
         * 1. ì—…ë¡œë“œ ì˜ì—­ ìŠ¤íƒ€ì¼
         * -------------------------
         */
        .upload-section {
            background-color: #ffffff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
            text-align: center;
        }

        #file-input {
            display: none;
        }

        .file-label {
            display: inline-block;
            padding: 12px 25px;
            background-color: #3498db;
            color: white;
            font-size: 1.1em;
            font-weight: 500;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-right: 10px;
        }

        .file-label:hover {
            background-color: #2980b9;
        }

        #file-name {
            display: inline-block;
            margin-top: 15px;
            font-size: 1em;
            color: #555;
        }

        .submit-btn {
            display: block;
            width: 100%;
            padding: 15px;
            font-size: 1.2em;
            font-weight: 600;
            color: white;
            background-color: #1abc9c;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s ease;
            margin-top: 25px;
        }

        .submit-btn:hover {
            background-color: #16a085;
        }

        /* * -------------------------
         * 2. [AI ë¶„ì„ ê²°ê³¼] UI ê°œì„ 
         * -------------------------
         */
        
        .result-card {
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            /* â˜…â˜…â˜… 'display: flex'ë¥¼ ì œê±°í•˜ì—¬ ë¸”ë¡ ìš”ì†Œë¡œ ë³€ê²½ */
            /* display: flex; (ì œê±°) */
            /* flex-wrap: wrap; (ì œê±°) */
        }

        /* â˜…â˜…â˜… '.result-image' ê´€ë ¨ CSSëŠ” ì•„ë˜ ìƒˆ CSSë¡œ ëŒ€ì²´ë¨ (ì œê±°) */
        
        .result-content {
            padding: 30px;
            /* â˜…â˜…â˜… 'flex: 1', 'min-width' ì œê±° */
        }

        /* â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… */
        /* â˜… 3. (ìƒˆë¡œ ì¶”ê°€) ì´ë¯¸ì§€ ë¹„êµ ë ˆì´ì•„ì›ƒ CSS â˜… */
        /* â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜…â˜… */

        /* ë‘ ì´ë¯¸ì§€ë¥¼ ê°ì‹¸ëŠ” flex ì»¨í…Œì´ë„ˆ */
        .image-comparison-wrapper {
            display: flex;
            width: 100%;
            border-bottom: 1px solid #eee; /* í…ìŠ¤íŠ¸ ì˜ì—­ê³¼ êµ¬ë¶„ì„  */
        }

        /* "ë‚´ ì‚¬ì§„", "1ìˆœìœ„ ì¶”ì²œ" ê°ê°ì˜ ë°•ìŠ¤ */
        .comparison-box {
            flex: 1; /* 1:1 ë¹„ìœ¨ë¡œ ê³µê°„ì„ ë‚˜ëˆ” */
            padding: 20px;
            text-align: center;
            min-width: 0; /* flex itemì´ ì¤„ì–´ë“¤ ìˆ˜ ìˆê²Œ í•¨ */
        }

        /* ì™¼ìª½ ë°•ìŠ¤ (ë‚´ ì‚¬ì§„) */
        .comparison-box.user-photo {
            border-right: 1px solid #eee; /* ë‘ ì´ë¯¸ì§€ ì‚¬ì´ êµ¬ë¶„ì„  */
        }

        /* ë°•ìŠ¤ ì•ˆì˜ ì œëª© (ë‚´ ì‚¬ì§„, 1ìˆœìœ„ ì¶”ì²œ) */
        .comparison-box h4 {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            margin-top: 0;
            margin-bottom: 15px;
        }
        
        /* 1ìˆœìœ„ ì¶”ì²œ ì œëª© ìƒ‰ìƒ ê°•ì¡° */
        .comparison-box.recommended-style h4 {
            color: #d35400; 
        }

        /* ë‘ ì´ë¯¸ì§€ ê³µí†µ ìŠ¤íƒ€ì¼ (ë¶€ëª¨ ë°•ìŠ¤ì— ê½‰ ì°¨ê²Œ) */
        .comparison-image { /* â˜…â˜…â˜… ê¸°ì¡´ .result-image, .top-style-image ëŒ€ì‹  ì‚¬ìš© */
            width: 100%;
            height: auto;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid #ddd;
            aspect-ratio: 1 / 1; /* â˜…â˜…â˜… 1:1 ë¹„ìœ¨ë¡œ ê°•ì œ (ì„ íƒ ì‚¬í•­) */
        }

        /* â˜…â˜…â˜… (ì œê±°) 1ìˆœìœ„ ì˜ˆì‹œ ê´€ë ¨ CSS (.top-style-preview ë“±) */
        /* ìœ„ '.comparison-box' ìŠ¤íƒ€ì¼ë¡œ ëŒ€ì²´ë˜ì—ˆìŠµë‹ˆë‹¤. */


        /* * -------------------------
         * 4. ê¸°ì¡´ ìŠ¤íƒ€ì¼ (í…ìŠ¤íŠ¸ ì˜ì—­)
         * -------------------------
         */

        .analysis-result p {
            font-size: 1.2em;
            line-height: 1.6;
        }

        .analysis-result strong {
            color: #d35400; 
            font-size: 1.1em;
        }

        .confidence {
            font-size: 1em !important;
            color: #7f8c8d;
            margin-top: -10px;
        }

        /* "ì¶”ì²œ ìŠ¤íƒ€ì¼ TOP 3" ë¦¬ìŠ¤íŠ¸ */
        .recommendation-list {
            list-style: none;
            padding: 0;
            margin-top: 25px;
        }

        .rec-item {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            margin-bottom: 12px;
            border-radius: 10px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .rec-item:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        /* ìˆœìœ„ë³„ ìƒ‰ìƒ ë¶€ì—¬ */
        .rank-1 { background-color: #fffbe6; border-left: 5px solid #f1c40f; }
        .rank-2 { background-color: #f4f6f7; border-left: 5px solid #bdc3c7; }
        .rank-3 { background-color: #fff0e6; border-left: 5px solid #e67e22; }

        .rank {
            font-size: 1.3em;
            font-weight: 700;
            min-width: 60px;
        }
        
        .rank-1 .rank { color: #f1c40f; }
        .rank-2 .rank { color: #7f8c8d; }
        .rank-3 .rank { color: #e67e22; }

        .style-name {
            font-size: 1.2em;
            font-weight: 600;
            flex-grow: 1;
            margin: 0 15px;
        }

        .preference {
            font-size: 1em;
            color: #555;
            font-weight: 500;
            white-space: nowrap;
        }

        /* â˜…â˜…â˜… (ì œê±°) ë¯¸ë””ì–´ ì¿¼ë¦¬ ë‚´ ë¶ˆí•„ìš”í•œ ìŠ¤íƒ€ì¼ */
        @media (min-width: 600px) {
             /* .result-image ê´€ë ¨ ìŠ¤íƒ€ì¼ ì œê±° */
        }


    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ¨ K-hairstyle AI ì¶”ì²œ ì‹œìŠ¤í…œ</h1>
        {% if result %}
        <section class="result-section">
            <h2>[AI ë¶„ì„ ê²°ê³¼]</h2>

            <div class="result-card">
                
                <div class="image-comparison-wrapper">
                    
                    <div class="comparison-box user-photo">
                        <h4>ë‚´ ì‚¬ì§„</h4>
                        <img src="{{ result.web_image_path }}" 
                             alt="ì—…ë¡œë“œëœ ì´ë¯¸ì§€" 
                             class="comparison-image"> </div>

                    {% if result.recommendations %}
                    <div class="comparison-box recommended-style">
                        <h4>1ìˆœìœ„ ì¶”ì²œ ({{ result.recommendations[0].hairstyle }})</h4>
                        <img src="{{ result.top_style_image_path }}" 
                             alt="{{ result.recommendations[0].hairstyle }} ìŠ¤íƒ€ì¼ ì˜ˆì‹œ" 
                             class="comparison-image"> </div>
                    {% endif %}
                </div>
                
                <div class="result-content">
                    
                    <div class="analysis-result">
                        <h3>ë¶„ì„ ê²°ê³¼</h3>
                        <p>ê³ ê°ë‹˜ì˜ ì–¼êµ´í˜•ì€ <strong>{{ result.face_shape }}</strong>ì— ê°€ê¹ìŠµë‹ˆë‹¤.</p>
                        <p class="confidence">(ì‹ ë¢°ë„: {{ result.confidence }})</p>
                    </div>

                    <div class="recommendations">
                        <h3>ì¶”ì²œ ìŠ¤íƒ€ì¼ TOP 3</h3>
                        <ul class="recommendation-list">
                            {% if result.recommendations %}
                                {% for item in result.recommendations %}
                                    <li class="rec-item rank-{{ loop.index }}"> 
                                        <span class="rank">{{ loop.index }}ìˆœìœ„</span>
                                        <span class="style-name">{{ item.hairstyle }}</span>
                                        <span class="preference">(ì„ í˜¸ë„: {{ item.count }}ê±´)</span>
                                    </li>
                                {% endfor %}
                            {% endif %} 
                        </ul>
                    </div>
                </div> 

            </div> </section>
        {% endif %} 
                <section class="upload-section">
            <form method="POST" enctype="multipart/form-data">

                <input type="file" id="file-input" name="file" accept="image/*" onchange="displayFileName(this)" required>
                
                <label for="file-input" class="file-label">ğŸ“¸ ì‚¬ì§„ ì—…ë¡œë“œ (ë˜ëŠ” ì°ê¸°)</label>
                
                <p id="file-name">ì„ íƒëœ íŒŒì¼ ì—†ìŒ</p>

                <button type="submit" class="submit-btn">ë¶„ì„ ë° ì¶”ì²œë°›ê¸°</button>
            </form>
        </section>
    </div>

    <script>
        function displayFileName(input) {
            const fileNameElement = document.getElementById('file-name');
            if (input.files && input.files.length > 0) {
                fileNameElement.textContent = input.files[0].name;
            } else {
                fileNameElement.textContent = 'ì„ íƒëœ íŒŒì¼ ì—†ìŒ';
            }
        }
    </script>

</body>
</html>